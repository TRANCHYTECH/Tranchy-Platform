<tranchy-breadcrumbs title="USER" [breadcrumbItems]="[]"></tranchy-breadcrumbs>
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title mb-0">
          {{ 'userModule.userListPage.title' | translate }}
        </h4>
      </div>
      <div class="card-body">
        <p-table
          [value]="users()"
          styleClass="p-datatable-striped table-card"
          [tableStyle]="{ 'min-width': '50rem' }"
        >
          <ng-template pTemplate="header">
            <tr>
              <th>{{ 'userModule.userListPage.username' | translate }}</th>
              <th>{{ 'userModule.userListPage.email' | translate }}</th>
              <th>{{ 'userModule.userListPage.firstname' | translate }}</th>
              <th>{{ 'userModule.userListPage.lastname' | translate }}</th>
              <th></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-user>
            <tr>
              <td>{{ user.userName }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.firstName }}</td>
              <td>{{ user.lastName }}</td>
              <td>
                <button
                  class="btn btn-sm btn-success"
                  (click)="viewDetail(user)"
                >
                  View Detail
                </button>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
      <p-confirmDialog [style]="{ width: '50vw' }"></p-confirmDialog>
    </div>
  </div>

  <p-dialog
    [(visible)]="showUserDialog"
    [style]="{ width: '450px' }"
    header="User Details"
    [modal]="true"
    styleClass="p-fluid"
  >
    <ng-template pTemplate="content">
      <form [formGroup]="userForm">
        <div class="field">
          <label for="Username" class="form-label">{{
            'userModule.userListPage.username' | translate
          }}</label>
          <input
            type="text"
            pInputText
            id="Username"
            formControlName="userName"
            required
            autofocus
            class="form-control"
          />
        </div>
        <div class="field">
          <label for="Email" class="form-label">{{
            'userModule.userListPage.email' | translate
          }}</label>
          <input
            type="text"
            pInputText
            id="Email"
            formControlName="email"
            required
            autofocus
            class="form-control"
          />
        </div>

        <div class="field">
          <label for="FirstName" class="form-label">{{
            'userModule.userListPage.firstname' | translate
          }}</label>
          <input
            type="text"
            pInputText
            id="FirstName"
            formControlName="firstName"
            required
            autofocus
            class="form-control"
          />
        </div>

        <div class="field">
          <label for="LastName" class="form-label">{{
            'userModule.userListPage.lastname' | translate
          }}</label>
          <input
            type="text"
            pInputText
            id="LastName"
            formControlName="lastName"
            required
            autofocus
            class="form-control"
          />
        </div>
      </form>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        icon="pi pi-times"
        class="p-button-text"
        (click)="hideDetail()"
      ></button>
    </ng-template>
  </p-dialog>
</div>
